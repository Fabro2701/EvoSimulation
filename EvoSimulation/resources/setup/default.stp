grammars := move;   "grammar.StandardGrammar"; "resources/loads/grammars/obesidad.bnf"|
			action; "grammar.StandardGrammar"; "resources/loads/grammars/obesidad_acts.bnf".
	
init := init1{
			  let p = (static "simulator.RandomSingleton").nextFloat();
			  if(p<=0.046f){
			  	e.setAttribute("imc","O");
			  }
			  else if(p<=0.25f){
			  	e.setAttribute("imc","S");
			  }
			  else{
			  	e.setAttribute("imc","N");
			  }
			 }.
updates := update1{
			let imc = e.getAttribute("imc");
			let p = (static "simulator.RandomSingleton").nextDouble();
			if(imc.equals("S")){
				if(p<=0.0003226f){
					e.setAttribute("imc","O");
					
				}
			}
		   }
		   update2{
			let imc = e.getAttribute("imc");
			let p = (static "simulator.RandomSingleton").nextDouble();
			let sn = 0.020*0.042*0.14285714;
			let os = 0.004*0.024*0.14285714;
			if(imc.equals("S")){
				if(p<=sn){
					e.setAttribute("imc","N");
				}
			}
			else if(imc.equals("O")){
				if(p<=os){
					e.setAttribute("imc","S");
				}
			}
		   }.
actions := <move> UP{
					 if(e.node.y > 0 && (map.getNodeAt(e.node.x, e.node.y-1)).type == enum "simulator.Constants$NODE_TYPE.LAND"){
					 	e.node.setY(e.node.y-1);
					 }
				  }
				  DOWN{
					 if(e.node.y < map.HEIGHT-1 && (map.getNodeAt(e.node.x, e.node.y+1)).type == enum "simulator.Constants$NODE_TYPE.LAND"){
					 	e.node.setY(e.node.y+1);
					 }
				  }
				  RIGHT{
					 if(e.node.x < map.WIDTH-1 && (map.getNodeAt(e.node.x+1, e.node.y)).type == enum "simulator.Constants$NODE_TYPE.LAND"){
					 	e.node.setX(e.node.x+1);
					 }
				  }
				  LEFT{
				     if(e.node.x > 0 && (map.getNodeAt(e.node.x-1, e.node.y)).type == enum "simulator.Constants$NODE_TYPE.LAND"){
					 	e.node.setX(e.node.x-1);
					 }
				  }
				  NEUTRAL{
				  		  let t = new simulator.model.evaluation.ActionEvaluator$TestEv();
				  		  test.testi(t);
				  		  test.testi(test);
				  		  test.i;
				  }|
		   <action> NOTHING{;}.  
interactions := OS_INTERACTION{
					let imc1 = e1.getAttribute("imc");
					let imc2 = e2.getAttribute("imc");
					if(imc1.equals("N")&&(imc1.equals("S")||imc1.equals("O"))){
						let p = (static "simulator.RandomSingleton").nextDouble();
						if(p<=0.001121f){
							e1.setAttribute("imc","S");
						}
					}
				}.